<%= render 'layouts/map_js' %>
<script id="center_map" type="text/javascript" data-long=<%= center['longitude']%> data-lat=<%= center['latitude']%> >
  function initialize() {
    
    console.log("map center:", <%= center['latitude'] %>, <%= center['longitude'] %>);
    
    var script = document.getElementById("center_map");
    var data_lat = script.getAttribute('data-lat');
    var data_long = script.getAttribute('data-long');
    
    var mapOptions = {
      center: new google.maps.LatLng(data_lat, data_long),
      zoom: 14
    };
    
    var map = new google.maps.Map(document.getElementById("map-canvas"),
        mapOptions);
        
    var latlng = new google.maps.LatLng(data_lat, data_long);
        
        
    var marker = new google.maps.Marker({
        position: latlng,
        map: map
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script>