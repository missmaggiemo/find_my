<% content_for :navbar do %>
  <%= render 'layouts/nav' %>
<% end %>

<% content_for :page do %>

<div class="container user-show">

  <div class="row" id="user-info-row">
    <div class="col-md-3" id="profile-pic-container">

      <div class="gravatar" id="profile-pic">
        <a href="http://en.gravatar.com/emails" target="_blank">
          <img src="http://www.gravatar.com/avatar/<%= @email_hash %>?s=200&r=pg">
        </a>
      </div>
    </div>

    <div class="col-md-9" id="profile-info-container">
      <div class="profile-header">
        <h1 id="user-welcome"><%= @user.username %> <small><%= @user.email %></small></h1>
      </div>  
      <div class="info" id="feed">
        <div class="info-container-scroll">
          <h2><span class="logo my">my</span> feed</h2>
          <% unless @user.feed.empty? %>
            <%= render partial: 'users/feed', locals: { feed: @user.feed } %>
          <% else %>
            <h2><small>You don't have any activity yet!</small></h2>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row" id="user-activity-row">
    <div class="col-md-4 favorites-container">
      <div class="activity-container">
        <div class="activity-container-scroll">
          <h2><span class="logo my">my</span> favorites</h2>
          <% unless @user.favorites.empty? %>
            <% @user.favorites.each do |fav| %>
              <%= render partial: 'favorites/fav_snippet', locals: { fav: fav, biz: Business.find(fav.business_id) } %>
            <% end %>
          <% else %>
            <h2><small>Favorite businesses will go here.</small></h2>
          <% end %>          
        </div>
      </div>
    </div>
    <div class="col-md-4 recent-ratings-container">
      <div class="activity-container">
        <div class="activity-container-scroll">
          <h2><span class="logo my">my</span> recent ratings</h2>
          <% unless @user.recent_ratings.empty? %>
            <% @user.recent_ratings.each do |rating| %>
              <%= render partial: 'ratings/rating_snippet', locals: { rating: rating, biz: Business.find(rating.business_id) } %>
            <% end %>
          <% else %>
            <h2><small>Recently rated businesses will go here.</small></h2>
          <% end %>          
        </div>
      </div>      
    </div>
    <div class="col-md-4 recent-searches-container">
      <div class="activity-container">
        <div class="activity-container-scroll">
          <h2><span class="logo my">my</span> recent searches</h2>
          <% unless @user.recent_searches.empty? %>
            <% @user.recent_searches.each do |saved_search| %>
              <%= render partial: 'searches/search_snippet', locals: { saved_search: saved_search, search: Search.find(saved_search.search_id) } %>
            <% end %>
          <% else %>
            <h2><small>Recent searches will go here.</small></h2>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  
</div>

<% end %>


<% content_for :scripts do %>

<script type="text/javascript">

</script>

<% end %>